<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>blockchain</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-title">Blockchain</div>
        <ul class="navbar-menu">
            <li class="active">Cadastrar</li>
            <li>Lista</li>
            <li>Pesquisa</li>
        </ul>
    </nav>
    <div class="container-cadastro" id="cadastroContainer">
        <h1>Cadastro de Paciente</h1>
        <form id="cadastroForm">
            <label for="nome">Nome*</label>
            <input type="text" id="nome" required>

            <label for="cpf">CPF*</label>
        <input type="text" id="cpf" required maxlength="14" oninput="mascaraCPF(this)">

            <label for="idade">Idade*</label>
            <input type="number" id="idade" min="13" required>

            <label for="endereco">Endereço</label>
            <input type="text" id="endereco">

            <button type="submit">Cadastrar</button>
        </form>
        <div id="mensagem"></div>
    </div>
    <div class="container-lista" id="listaContainer" style="display:none">
        <h1>Lista de Pacientes</h1>
        <table id="tabelaPacientes" style="width:100%;border-collapse:collapse;">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nome</th>
                    <th>CPF</th>
                    <th>Idade</th>
                    <th>Endereço</th>
                </tr>
            </thead>
            <tbody>
                <!-- Pacientes serão inseridos aqui -->
            </tbody>
        </table>
        <div id="mensagemLista"></div>
    </div>
    <div class="container-pesquisa" id="pesquisaContainer" style="display:none">
        <h1>Pesquisar Paciente por CPF</h1>
        <form id="pesquisaForm">
        <label for="cpfPesquisa">CPF*</label>
        <input type="text" id="cpfPesquisa" placeholder="Digite o CPF do paciente" required maxlength="14" oninput="mascaraCPF(this)">
            <button type="submit">Pesquisar</button>
        </form>
        <div id="mensagemPesquisa"></div>
        <div id="resultadoPesquisa" style="display:none">
            <table id="tabelaResultado" style="width:100%;border-collapse:collapse;">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>CPF</th>
                        <th>Idade</th>
                        <th>Endereço</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Resultado da pesquisa será inserido aqui -->
                </tbody>
            </table>
        </div>
    </div>
    <script src="cadastro.js"></script>
    <script>
    // Função de máscara para CPF (formato 000.000.000-00)
    function mascaraCPF(input) {
        let value = input.value.replace(/\D/g, '');
        if (value.length > 11) value = value.slice(0, 11);
        value = value.replace(/(\d{3})(\d)/, '$1.$2');
        value = value.replace(/(\d{3})(\d)/, '$1.$2');
        value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
        input.value = value;
    }
    </script>
</body>
</html>
